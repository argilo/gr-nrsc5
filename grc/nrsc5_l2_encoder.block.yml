# auto-generated by grc.converter

id: nrsc5_l2_encoder
label: Layer 2 encoder
category: '[NRSC-5]'

parameters:
-   id: num_progs
    label: Programs
    dtype: int
    default: 1
-   id: first_prog
    label: First prog. no.
    dtype: int
    default: 0
-   id: size
    label: Frame size
    dtype: int
    default: 146176
    options: [146176, 109312, 72448, 30000, 24000, 9216, 4608, 3750, 2304]
-   id: data_bytes
    label: Data bytes
    dtype: int
    default: 0
-   id: blend_control
    label: Blend control
    dtype: enum
    options: [nrsc5.blend.DISABLE, nrsc5.blend.SELECT, nrsc5.blend.ENABLE]
    option_labels: ["Disable", "Select", "Enable"]
    default: nrsc5.blend.ENABLE
    hide: ${ ('none' if first_prog == 0 else 'all') }

inputs:
-   label: hdc
    domain: stream
    dtype: byte
    multiplicity: ${ num_progs }
-   label: psd
    domain: stream
    dtype: byte
    multiplicity: ${ num_progs }
-   domain: message
    id: aas
    optional: true

outputs:
-   domain: stream
    dtype: byte
    vlen: ${ size }
-   domain: message
    id: ready
    optional: true
asserts:
- ${ 0 <= first_prog <= 7 }
- ${ 1 <= num_progs <= 8 - first_prog }
- ${ data_bytes < (size - 22) // 8 }

templates:
    imports: import nrsc5
    make: nrsc5.l2_encoder(${num_progs}, ${first_prog}, ${size}, ${data_bytes}, ${blend_control})

file_format: 1
